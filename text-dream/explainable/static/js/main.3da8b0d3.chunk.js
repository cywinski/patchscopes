/*! For license information please see main.3da8b0d3.chunk.js.LICENSE.txt */
(this.webpackJsonpbertsdreams=this.webpackJsonpbertsdreams||[]).push([[0],{127:function(e,t,a){e.exports=a(143)},142:function(e,t,a){},143:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"addDreamingElement",(function(){return ct})),a.d(n,"updateDreamingElements",(function(){return lt})),a.d(n,"removeDreamingElement",(function(){return mt})),a.d(n,"changeDreamingElementIteration",(function(){return ht})),a.d(n,"changeCardDimensions",(function(){return ut})),a.d(n,"changeSoftmaxStatus",(function(){return pt})),a.d(n,"changeProgressPage",(function(){return dt})),a.d(n,"changeTopWordsIteration",(function(){return ft})),a.d(n,"changeDreamID",(function(){return gt})),a.d(n,"changeDreamSuccess",(function(){return bt})),a.d(n,"loadDream",(function(){return vt})),a.d(n,"changeDream",(function(){return Et})),a.d(n,"changeAnnealingSuccess",(function(){return wt})),a.d(n,"loadAnnealing",(function(){return yt})),a.d(n,"changeAnnealing",(function(){return xt})),a.d(n,"changeTopWordsSuccess",(function(){return Ot})),a.d(n,"loadTopWords",(function(){return kt})),a.d(n,"changeTopWords",(function(){return jt})),a.d(n,"changeSimilarWordsSuccess",(function(){return Nt})),a.d(n,"loadSimilarWords",(function(){return It})),a.d(n,"changeSimilarWords",(function(){return Dt})),a.d(n,"changeReconstructionSuccess",(function(){return Tt})),a.d(n,"loadReconstruction",(function(){return St})),a.d(n,"changeReconstruction",(function(){return Ct})),a.d(n,"changeShiftedReconstructionSuccess",(function(){return _t})),a.d(n,"loadShiftedReconstruction",(function(){return At})),a.d(n,"changeShiftedReconstruction",(function(){return Pt}));var r=a(0),i=a.n(r),o=a(17),s=a.n(o),c=a(13),l=a(11),m=a(106),h=a(188),u=a(110),p=a(187),d=a(76),f=a(2),g=a(3),b=a(5),v=a(4),E=a(34),w=a(20),y=a(190),x=a(173),O=a(24),k=a(184),j=a(185),N=a(177),I=a(145),D=a(109),T=a.n(D),S=a(144),C=a(191),_=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){var e=this.props.sentence.slice(1,-1),t=[];for(var a in e)e[a]===this.props.target[parseInt(a)+1]?t.push(this.props.colors[0]):e[a]===this.props.original[parseInt(a)+1]?t.push(this.props.colors[1]):t.push(this.props.colors[2]);return i.a.createElement(x.a,{container:!0,direction:"row",spacing:1,className:"mainGrid"},e.map((function(e,a){return i.a.createElement(x.a,{item:!0,key:a},i.a.createElement(N.a,{variant:"body2",style:{color:t[a]}},e))})))}}]),a}(i.a.Component),A=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){var e=this.props.extremes.max-this.props.extremes.min,t="M 0 20 H 10 V "+20*(1-(this.props.value-this.props.extremes.min)/e)+" H "+"-10 Z";return i.a.createElement("svg",{width:10,height:20,id:"glyphsSVG"},i.a.createElement("g",null,i.a.createElement("path",{d:t,stroke:this.props.color,fill:this.props.color}),i.a.createElement("path",{d:"M 0 0 V 20",stroke:"black"})))}}]),a}(i.a.Component),P=a(80),W=a(77),R=a(79),J=a(78),H={activation:P.a[500],ids_activation:P.a[200],loss:W.a[500],ids_loss:W.a[300],temperature:R.a[500],distance:d.a[500],softmax:J.a[500]};function V(e){return H[e]}function z(e){var t={};if(Object.prototype.hasOwnProperty.call(e[0],"temperature")&&(M(t,e,"temperature"),t.temperature.color=V("temperature")),Object.prototype.hasOwnProperty.call(e[0],"loss")&&(M(t,e,"loss"),t.loss.color=V("loss"),Object.prototype.hasOwnProperty.call(e[0],"ids_loss"))){M(t,e,"ids_loss"),t.ids_loss.color=V("ids_loss");var a=Math.max(t.loss.extremes.max,t.ids_loss.extremes.max);t.loss.extremes.max=a,t.ids_loss.extremes.max=a}if(Object.prototype.hasOwnProperty.call(e[0],"activation")&&(M(t,e,"activation"),t.activation.color=V("activation"),Object.prototype.hasOwnProperty.call(e[0],"ids_activation"))){M(t,e,"ids_activation"),t.ids_activation.color=V("ids_activation");var n=Math.max(t.activation.extremes.max,t.ids_activation.extremes.max);t.activation.extremes.max=n,t.ids_activation.extremes.max=n}return t}function M(e,t,a){e[a]={iterations:[],extremes:{max:0,min:0}};var n,r=Object(O.a)(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;e[a].iterations.push(i[a]),e[a].extremes.max<i[a]&&(e[a].extremes.max=i[a])}}catch(o){r.e(o)}finally{r.f()}}function B(e,t,a){e[a]={magnitudes:[],extremes:{max:0,min:0}};var n,r=Object(O.a)(t);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=i.results.iterations[i.results.iterations.length-1];e[a].magnitudes.push(o[a]);var s,c=Object(O.a)(i.results.iterations);try{for(c.s();!(s=c.n()).done;){var l=s.value;e[a].extremes.max<l[a]&&(e[a].extremes.max=l[a])}}catch(m){c.e(m)}finally{c.f()}}}catch(m){r.e(m)}finally{r.f()}}var G=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){var e=this,t=this.props.results.iterations,a=z(t);return i.a.createElement(x.a,{container:!0,direction:"column",spacing:2,wrap:"nowrap"},t.map((function(t,n){return i.a.createElement(x.a,{item:!0,key:n},i.a.createElement(x.a,{container:!0,direction:"row",spacing:1},i.a.createElement(C.a,{title:"Iteration Number",placement:"top"},i.a.createElement(x.a,{item:!0,style:{width:e.props.sentenceParams.itWidth}},i.a.createElement(N.a,{variant:"caption",color:"inherit"},t.number))),i.a.createElement(x.a,{item:!0},i.a.createElement(x.a,{container:!0,direction:"row",spacing:0},Object.keys(a).map((function(e,t){return i.a.createElement(C.a,{title:e+": "+a[e].iterations[n].toFixed(4),placement:"top",key:t},i.a.createElement(x.a,{item:!0},i.a.createElement(A,{value:a[e].iterations[n],extremes:a[e].extremes,color:a[e].color})))})))),i.a.createElement(x.a,{item:!0},i.a.createElement(_,{sentence:t.tokens,target:e.props.sentenceParams.target,original:e.props.sentenceParams.target,colors:e.props.sentenceParams.colors}))))})))}}]),a}(i.a.Component),L=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement(x.a,{item:!0},i.a.createElement(S.a,{className:"subHeadingPaper",style:{backgroundColor:"#DDDDDD"},square:!0},i.a.createElement(x.a,{container:!0,direction:"row",spacing:1,alignItems:"center",wrap:"nowrap"},i.a.createElement(C.a,{title:"Input Sentence",placement:"top"},i.a.createElement(x.a,{item:!0,style:{width:this.props.sentenceParams.headWidth}},i.a.createElement(N.a,{variant:"body1",color:"inherit"},"I"))),i.a.createElement(x.a,{item:!0},i.a.createElement(_,{sentence:this.props.params.tokens,target:this.props.sentenceParams.target,original:this.props.sentenceParams.target,colors:this.props.sentenceParams.colors})))))}}]),a}(i.a.Component),F=a(108),U=a.n(F);var q={Dream:i.a.createElement("div",{className:"tooltipDiv"},i.a.createElement("span",{className:"styledTooltip"},i.a.createElement("b",null,"Dream Visualization")),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("span",{className:"styledTooltip"},"Here, you can see how the dreaming process changes its predictions over the course of many iterations."),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("span",{className:"styledTooltip"},"At the top, you can see which layer, word, and neuron was maximized for. Below that, you see the sentence that we started the process with."),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("span",{className:"styledTooltip"},"Iteration numbers are written on the left, next to a small plot showing the temperature in blue, the activation of the softmax combination in dark green, and the activation when taking only the word with the highest softmax value in light green."),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("span",{className:"styledTooltip"},"The sentences for each row show the words with the highest softmax value for each iteration. Black words are fixed, while blue words can be changed by the model.")),TopWords:i.a.createElement("div",{className:"tooltipDiv"},i.a.createElement("span",{className:"styledTooltip"},i.a.createElement("b",null,"Annealing Visualization")),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("span",{className:"styledTooltip"},"This visualization shows how the softmax distribution changes over the training process."),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("span",{className:"styledTooltip"},"At the top, you can see which layer, word, and neuron was maximized for. Below that, you see the sentence that we started the process with. The blue word marks for which word the annealing process is visualized here."),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("span",{className:"styledTooltip"},"With the iteration slider, you can change the iteration for which the softmax distribution is currently displayed."),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("span",{className:"styledTooltip"},"The graph below this shows the words with the highest softmax values for the selected iteration.")),TokenSearch:i.a.createElement("div",{className:"tooltipDiv"},i.a.createElement("span",{className:"styledTooltip"},i.a.createElement("b",null,"Token Search Visualization")),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("span",{className:"styledTooltip"},"This visualization shows the words for a given position that lead to the highest activation of the selected neuron."),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("span",{className:"styledTooltip"},"At the top, you can see which layer, word, and neuron was maximized for. Below that, you see the sentence that we started the process with. The blue word marks the position for which we searched for the most activating words."),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("span",{className:"styledTooltip"},"The graph below shows the words which lead to the highest activation values. The numbers on the bars represent the activation that this word leads to.")),SimilarEmbeddings:i.a.createElement("div",{className:"tooltipDiv"},i.a.createElement("span",{className:"styledTooltip"},i.a.createElement("b",null,"Similar Words Activations")),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("span",{className:"styledTooltip"},"Here you can see the activations for words that are close to the highlighted words in embedding space."),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("span",{className:"styledTooltip"},"At the top, you can see which layer, word, and neuron was maximized for. Below that, you see the sentence that we started the process with. The blue word marks the position for which we looked up the activation of similar words."),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("span",{className:"styledTooltip"},"The graph below shows the most similar words alongside their activation values. Green bars represent the activation of the word, while grey bars show the distance in embedding space.")),Reconstruct:i.a.createElement("div",{className:"tooltipDiv"},i.a.createElement("span",{className:"styledTooltip"},i.a.createElement("b",null,"Reconstructing Activations")),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("span",{className:"styledTooltip"},"In this visualization, we show the results of an experiment where we try to reconstruct activations of a sentence that we previously recorded."),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("span",{className:"styledTooltip"},"At the top, we show the sentence for which we recorded activation values."),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("span",{className:"styledTooltip"},"Below that, you can see the reuslts of this reconstruction process for each layer in the model. Green words are words that were reconstructed correctly, while red words differ from the original sentence."),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("span",{className:"styledTooltip"},"To get even more insights, you can also click on one of the layers, which shows how the reconstruction process evolved over many iterations. Here, we show the iteration number next to a small graph. For this graph, the blue bar shows the temperature value for this iteration, while the dark red bar shows the loss between the activation of the softmax combination of tokens and the target activation. The light red bar shows the loss if we were to only look at the top-ranked word at each position.")),Shift:i.a.createElement("div",{className:"tooltipDiv"},i.a.createElement("span",{className:"styledTooltip"},i.a.createElement("b",null,"Shifting Activations")),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("span",{className:"styledTooltip"},"At the top of this visualization, we show the sentence for which we recorded activation values. Below that, you can see the change we wanted to force the model into. Only the activation value for the green word is changed in this process."),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("span",{className:"styledTooltip"},"We applied this change to all the layers in the model. For each layer, we show the result that came closest to the target sentence of this change. Black words are words that did not change from the original sentence, if a word is green, the shift was successful, and if a word is red, it has been changed to something we did not intend it to change to."),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("span",{className:"styledTooltip"},"To get even more insights, you can also click on one of the layers, which shows results for different magnitudes of this activation shift. We show this magnitude as a number on the left of each row. Next to it is the loss graph, where a dark red bar shows the loss between the activation of the softmax combination of tokens and the target activation, whereas the light red bar shows the loss if we were to only look at the top-ranked word at each position."))},Y=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return r.createElement(x.a,{item:!0,container:!0,alignItems:"center",wrap:"nowrap",style:{paddingRight:"15px"}},r.createElement("svg",{width:10,height:10,id:"glyphsSVG",style:{marginRight:"5px"}},r.createElement("rect",{width:"10",height:"10",fill:V(this.props.color)})),r.createElement(N.a,{variant:"caption",color:"inherit"},this.props.color))}}]),a}(r.Component),Q=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){var e,t=[],a=Object(O.a)(this.props.colors);try{for(a.s();!(e=a.n()).done;){var n=e.value;t.includes(n)||t.push(n)}}catch(i){a.e(i)}finally{a.f()}return r.createElement(x.a,{item:!0,container:!0,wrap:"nowrap",style:{width:"auto"}},t.map((function(e,t){return r.createElement(Y,{color:e,key:t})})))}}]),a}(r.Component),X=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){for(var e=this,t=Object.keys(this.props.params),a={},n=0,r=t;n<r.length;n++){var o=r[n];null!==this.props.params[o]&&(a[o]=this.props.params[o])}t=Object.keys(a);var s,c=this.props.topic;return"Top Words"===c&&(c="Annealing"),i.a.createElement(x.a,{item:!0},i.a.createElement(S.a,{className:"headingPaper",square:!0},i.a.createElement(x.a,{container:!0,direction:"row",spacing:0,alignItems:"center",wrap:"nowrap"},i.a.createElement(x.a,{item:!0,container:!0,direction:"row",spacing:1,alignItems:"center"},i.a.createElement(x.a,{item:!0},i.a.createElement(N.a,{variant:"body1",color:"inherit"},c)),t.map((function(t,a){return i.a.createElement(x.a,{item:!0,key:a},i.a.createElement(N.a,{variant:"caption",color:"inherit"},t,": ",e.props.params[t]))}))),i.a.createElement(Q,{colors:this.props.colors?this.props.colors:[]}),i.a.createElement(x.a,{item:!0},i.a.createElement(C.a,{title:(s=this.props.topic.replace(" ",""),q[s])},i.a.createElement(U.a,{className:"tooltipIcon"}))))))}}]),a}(i.a.Component);var Z=Object(l.b)(null,(function(e){return{actions:Object(c.b)(n,e)}}))(X),$=a(180),K=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){for(var e=this,t=[],a=function(a){t.push(i.a.createElement(x.a,{item:!0,key:a},i.a.createElement($.a,{variant:"contained",className:"runButton",color:a+1===e.props.dreamID?"primary":"secondary",onClick:function(){return e.props.clickHandler(a+1)}},a+1)))},n=0;n<this.props.options;n++)a(n);return i.a.createElement(x.a,{item:!0,className:"selectionHead"},i.a.createElement(x.a,{container:!0,direction:"row",spacing:2,alignItems:"center",justify:"center"},t.map((function(e){return e}))))}}]),a}(i.a.Component);var ee=Object(l.b)((function(e,t){return{dreamID:e.dreamID}}),null)(K),te=a(26);function ae(e,t){var a=e.iterations,n=8*(a[a.length-1].number.toString().length+1),r=n+24,i=Object(te.a)(t.tokens);for(var o in i)t.dream_start<=o&&t.dream_end>=o&&(i[o]="");return{itWidth:n,headWidth:r,colors:["black","black","blue"],target:i,original:Object(te.a)(t.tokens)}}function ne(e,t){var a=e.iterations,n=8*(a[a.length-1].number.toString().length+1),r=n+24,i=Object(te.a)(t.tokens);for(var o in i)(t.dream_start>o||t.dream_end<o)&&(i[o]="");return{itWidth:n,headWidth:r,colors:["green","black","red"],target:i,original:Object(te.a)(t.tokens)}}function re(e,t){var a=e.iterations,n=8*(a[a.length-1].number.toString().length+1),r=n+24,i=Object(te.a)(t.tokens),o=Object(te.a)(t.tokens);for(var s in i)t.shift_start>=s&&t.shift_end<=s?(i[s]=t.target,o[s]=t.target):i[s]="";return{itWidth:n,headWidth:r,colors:["green","black","red"],target:i,changedSentence:o,original:Object(te.a)(t.tokens)}}function ie(e,t){var a,n=t[0].results.iterations[t[0].results.iterations.length-1].sentence,r=0,i=Object(O.a)(t);try{for(i.s();!(a=i.n()).done;){var o=a.value,s=0;for(var c in e)o.results.iterations[o.results.iterations.length-1].tokens[c]===e[c]&&(s+=1);s>r&&(r=s,n=o.results.iterations[o.results.iterations.length-1].tokens)}}catch(l){i.e(l)}finally{i.f()}return n}var oe=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){var e=ae(this.props.results,this.props.params),t={LayerID:this.props.params.layer_id,WordID:this.props.params.word_id,NeuronID:this.props.params.neuron_id};return i.a.createElement(x.a,{container:!0,direction:"column",className:"fullHeight",wrap:"nowrap",justify:"center"},i.a.createElement(x.a,{item:!0,className:"explanationItem"},i.a.createElement("p",{className:"normalText"},i.a.createElement("b",null,"Experiment ",this.props.dreamID,": "),this.props.explanation)),i.a.createElement(Z,{topic:"Dream",params:t,elementIndex:this.props.elementIndex,colors:this.props.colors}),i.a.createElement(L,{params:this.props.params,sentenceParams:e}),i.a.createElement("div",{className:"overflow bottomMargin"},i.a.createElement(S.a,{className:"dreamPaper"},i.a.createElement(G,{results:this.props.results,params:this.props.params,sentenceParams:e}))),i.a.createElement(ee,{options:3,clickHandler:this.handleClick.bind(this)}))}},{key:"handleClick",value:function(e){this.props.actions.changeDream(e)}}]),a}(i.a.PureComponent);var se=Object(l.b)((function(e,t){return{dreamID:e.dreamID}}),(function(e){return{actions:Object(c.b)(n,e)}}))(oe),ce=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement(x.a,{item:!0},i.a.createElement(S.a,{className:"subHeadingPaper",style:{backgroundColor:"#DDDDDD"},square:!0},i.a.createElement(x.a,{container:!0,direction:"row",spacing:1,alignItems:"center",wrap:"nowrap"},i.a.createElement(C.a,{title:"Reconstruct Target",placement:"top"},i.a.createElement(x.a,{item:!0,style:{width:this.props.sentenceParams.headWidth}},i.a.createElement(N.a,{variant:"body1",color:"inherit"},"T"))),i.a.createElement(x.a,{item:!0},i.a.createElement(_,{sentence:this.props.params.tokens,target:this.props.sentenceParams.target,original:this.props.params.tokens,colors:this.props.sentenceParams.colors})))))}}]),a}(i.a.Component),le=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){var e=this,t=this.props.results.iterations,a=z(t);return i.a.createElement(x.a,{container:!0,direction:"column",spacing:2,wrap:"nowrap"},t.map((function(t,n){return i.a.createElement(x.a,{item:!0,key:n},i.a.createElement(x.a,{container:!0,direction:"row",spacing:1},i.a.createElement(C.a,{title:"Iteration Number",placement:"top"},i.a.createElement(x.a,{item:!0,style:{width:e.props.sentenceParams.itWidth}},i.a.createElement(N.a,{variant:"caption",color:"inherit"},t.number))),i.a.createElement(x.a,{item:!0},i.a.createElement(x.a,{container:!0,direction:"row",spacing:0},Object.keys(a).map((function(e,t){return i.a.createElement(C.a,{title:e+": "+a[e].iterations[n].toFixed(4),placement:"top",key:t},i.a.createElement(x.a,{item:!0},i.a.createElement(A,{value:a[e].iterations[n],extremes:a[e].extremes,color:a[e].color})))})))),i.a.createElement(x.a,{item:!0},i.a.createElement(_,{sentence:t.tokens,target:e.props.sentenceParams.target,original:e.props.params.tokens,colors:e.props.sentenceParams.colors}))))})))}}]),a}(i.a.Component),me=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){var e=ne(this.props.results,this.props.params),t={LayerID:this.props.params.layer_id,WordID:this.props.params.word_id,NeuronID:this.props.params.neuron_id};return i.a.createElement(x.a,{container:!0,direction:"column",className:"fullHeight",wrap:"nowrap"},i.a.createElement(Z,{topic:"Reconstruct",params:t,elementIndex:this.props.elementIndex,colors:this.props.colors}),i.a.createElement(ce,{results:this.props.results,params:this.props.params,sentenceParams:e}),i.a.createElement("div",{className:"overflow"},i.a.createElement(S.a,{className:"dreamPaper"},i.a.createElement(le,{results:this.props.results,params:this.props.params,sentenceParams:e}))))}}]),a}(i.a.PureComponent),he=a(192),ue=a(181),pe=a(182),de=a(23),fe=a.n(de),ge=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement(x.a,{item:!0},i.a.createElement(S.a,{className:"subHeadingPaper",style:{backgroundColor:"#DDDDDD"},square:!0},i.a.createElement(x.a,{container:!0,direction:"row",spacing:1,alignItems:"center"},i.a.createElement(C.a,{title:"Reconstruct Input",placement:"top"},i.a.createElement(x.a,{item:!0,style:{width:this.props.sentenceParams.headWidth}},i.a.createElement(N.a,{variant:"body1",color:"inherit"},"I"))),i.a.createElement(x.a,{item:!0},i.a.createElement(_,{sentence:this.props.params.tokens,target:this.props.sentenceParams.target,original:this.props.params.tokens,colors:this.props.sentenceParams.colors})))),i.a.createElement(S.a,{className:"subHeadingPaper",style:{backgroundColor:"#DDDDDD"},square:!0},i.a.createElement(x.a,{container:!0,direction:"row",spacing:1,alignItems:"center"},i.a.createElement(C.a,{title:"Reconstruct Target",placement:"top"},i.a.createElement(x.a,{item:!0,style:{width:this.props.sentenceParams.headWidth}},i.a.createElement(N.a,{variant:"body1",color:"inherit"},"T"))),i.a.createElement(x.a,{item:!0},i.a.createElement(_,{sentence:this.props.sentenceParams.changedSentence,target:this.props.sentenceParams.target,original:this.props.params.tokens,colors:this.props.sentenceParams.colors})))))}}]),a}(i.a.Component),be=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){var e=this,t=this.props.magnitudes;t.sort((function(e,t){return e.params.shift_magnitude-t.params.shift_magnitude}));var a=function(e){var t={},a=e[0].results.iterations[0];return Object.prototype.hasOwnProperty.call(a,"loss")&&(B(t,e,"loss"),t.loss.color=V("loss")),Object.prototype.hasOwnProperty.call(a,"ids_loss")&&(B(t,e,"ids_loss"),t.ids_loss.color=V("ids_loss")),t}(t);return i.a.createElement(x.a,{container:!0,direction:"column",spacing:2,wrap:"nowrap"},t.map((function(t,n){return i.a.createElement(x.a,{item:!0,key:n},i.a.createElement(x.a,{container:!0,direction:"row",spacing:1},i.a.createElement(C.a,{title:"Shift Magnitude",placement:"top"},i.a.createElement(x.a,{item:!0,style:{width:e.props.sentenceParams.itWidth}},i.a.createElement(N.a,{variant:"caption",color:"inherit"},t.params.shift_magnitude))),i.a.createElement(x.a,{item:!0},i.a.createElement(x.a,{container:!0,direction:"row",spacing:0},Object.keys(a).map((function(e,t){return i.a.createElement(C.a,{title:e+": "+a[e].magnitudes[n].toFixed(4),placement:"top",key:t},i.a.createElement(x.a,{item:!0},i.a.createElement(A,{value:a[e].magnitudes[n],extremes:a[e].extremes,color:a[e].color})))})))),i.a.createElement(x.a,{item:!0},i.a.createElement(_,{sentence:t.results.iterations[t.results.iterations.length-1].tokens,target:e.props.sentenceParams.target,original:t.params.tokens,colors:e.props.sentenceParams.colors}))))})))}}]),a}(i.a.Component),ve=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){var e=this,t=this.props.results.iterations,a=z(t);return i.a.createElement(x.a,{container:!0,direction:"column",spacing:2,wrap:"nowrap"},t.map((function(t,n){return i.a.createElement(x.a,{item:!0,key:n},i.a.createElement(x.a,{container:!0,direction:"row",spacing:1},i.a.createElement(C.a,{title:"Iteration Number",placement:"top"},i.a.createElement(x.a,{item:!0,style:{width:e.props.sentenceParams.itWidth}},i.a.createElement(N.a,{variant:"caption",color:"inherit"},t.number))),i.a.createElement(x.a,{item:!0},i.a.createElement(x.a,{container:!0,direction:"row",spacing:0},Object.keys(a).map((function(e,t){return i.a.createElement(C.a,{title:e+": "+a[e].iterations[n].toFixed(4),placement:"top",key:t},i.a.createElement(x.a,{item:!0},i.a.createElement(A,{value:a[e].iterations[n],extremes:a[e].extremes,color:a[e].color})))})))),i.a.createElement(x.a,{item:!0},i.a.createElement(_,{sentence:t.tokens,target:e.props.sentenceParams.target,original:e.props.params.tokens,colors:e.props.sentenceParams.colors}))))})))}}]),a}(i.a.Component);var Ee=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){var e;switch(this.props.layers[0].type){case"dream":e=function(e){e.sort((function(e,t){return e.params.layer_id-t.params.layer_id}));var t,a=[],n=[],r=[],o=ae(e[0].results,e[0].params),s=i.a.createElement(L,{params:e[0].params,sentenceParams:o}),c={WordID:e[0].params.word_id,NeuronID:e[0].params.neuron_id},l=Object(O.a)(e);try{for(l.s();!(t=l.n()).done;){var m=t.value;r.push(m.params.layer_id),a.push(i.a.createElement(G,{results:m.results,params:m.params,sentenceParams:o})),n.push(m.results.iterations[m.results.iterations.length-1].tokens)}}catch(h){l.e(h)}finally{l.f()}return{head:s,sentences:n,layerIDs:r,topic:"Dream",sentenceParams:o,headParams:c,bodies:a}}(this.props.layers);break;case"reconstruct":e=function(e){e.sort((function(e,t){return e.params.layer_id-t.params.layer_id}));var t,a=[],n=[],r=[],o=ne(e[0].results,e[0].params),s=i.a.createElement(ce,{results:e[0].results,params:e[0].params,sentenceParams:o}),c={WordID:e[0].params.word_id,NeuronID:e[0].params.neuron_id},l=Object(O.a)(e);try{for(l.s();!(t=l.n()).done;){var m=t.value;r.push(m.params.layer_id),a.push(i.a.createElement(le,{results:m.results,params:m.params,sentenceParams:o})),n.push(m.results.iterations[m.results.iterations.length-1].tokens)}}catch(h){l.e(h)}finally{l.f()}return{head:s,sentences:n,layerIDs:r,topic:"Reconstruct",sentenceParams:o,headParams:c,bodies:a}}(this.props.layers);break;case"magnitudes":e=function(e){e.sort((function(e,t){return e.magnitudes[0].params.layer_id-t.magnitudes[0].params.layer_id}));var t=[],a=[],n=[],r=re(e[0].magnitudes[0].results,e[0].magnitudes[0].params);r.headWidth=r.headWidth-10;var o,s={WordID:e[0].magnitudes[0].params.word_id,NeuronID:e[0].magnitudes[0].params.neuron_id},c=i.a.createElement(ge,{params:e[0].magnitudes[0].params,sentenceParams:r}),l=Object(O.a)(e);try{for(l.s();!(o=l.n()).done;){var m=o.value;n.push(m.magnitudes[0].params.layer_id),t.push(i.a.createElement(be,{magnitudes:m.magnitudes,sentenceParams:r})),a.push(ie(r.changedSentence,m.magnitudes))}}catch(h){l.e(h)}finally{l.f()}return{head:c,sentences:a,layerIDs:n,topic:"Shift",sentenceParams:r,headParams:s,bodies:t}}(this.props.layers)}return e.sentenceParams.headWidth=e.sentenceParams.headWidth+14,i.a.createElement(x.a,{container:!0,direction:"column",className:"fullHeight",wrap:"nowrap",justify:"center"},i.a.createElement(x.a,{item:!0,className:"explanationItem"},i.a.createElement("p",{className:"normalText"},i.a.createElement("b",null,"Experiment ",this.props.dreamID,": "),this.props.explanation)),i.a.createElement(Z,{topic:e.topic,params:e.headParams,elementIndex:this.props.elementIndex,colors:this.props.colors}),e.head,i.a.createElement("div",{className:"overflow bottomMargin"},e.bodies.map((function(t,a){return i.a.createElement(he.a,{key:a},i.a.createElement(ue.a,{expandIcon:i.a.createElement(fe.a,null)},i.a.createElement(x.a,{container:!0,direction:"row",spacing:1,alignItems:"center",wrap:"nowrap"},i.a.createElement(x.a,{item:!0,style:{width:e.sentenceParams.headWidth}},i.a.createElement(N.a,{variant:"body1",color:"inherit"},e.layerIDs[a])),i.a.createElement(x.a,{item:!0},i.a.createElement(_,{sentence:e.sentences[a],target:e.sentenceParams.target,original:e.sentenceParams.original,colors:e.sentenceParams.colors})))),i.a.createElement(pe.a,null,t))}))),i.a.createElement(ee,{options:3,clickHandler:this.handleClick.bind(this)}))}},{key:"handleClick",value:function(e){switch(this.props.layers[0].type){case"dream":this.props.actions.changeDream(e);break;case"reconstruct":this.props.actions.changeReconstruction(e);break;case"magnitudes":this.props.actions.changeShiftedReconstruction(e)}}}]),a}(i.a.PureComponent);var we=Object(l.b)((function(e,t){return{dreamID:e.dreamID}}),(function(e){return{actions:Object(c.b)(n,e)}}))(Ee),ye=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){var e={LayerID:this.props.magnitudes[0].params.layer_id,WordID:this.props.magnitudes[0].params.word_id,NeuronID:this.props.magnitudes[0].params.neuron_id},t=re(this.props.magnitudes[0].results,this.props.magnitudes[0].params),a=function(e){e.sort((function(e,t){return e.params.shift_magnitude-t.params.shift_magnitude}));var t,a=[],n=[],r=[],o=re(e[0].results,e[0].params),s={LayerID:e[0].params.layer_id,WordID:e[0].params.word_id,NeuronID:e[0].params.neuron_id},c=i.a.createElement(ge,{params:e[0].params,sentenceParams:o}),l=Object(O.a)(e);try{for(l.s();!(t=l.n()).done;){var m=t.value;r.push(m.params.shift_magnitude),a.push(i.a.createElement(ve,{results:m.results,params:m.params,sentenceParams:o})),n.push(m.results.iterations[m.results.iterations.length-1].tokens)}}catch(h){l.e(h)}finally{l.f()}return{head:c,sentences:n,magnitudeValues:r,topic:"Shift",sentenceParams:o,headParams:s,bodies:a}}(this.props.magnitudes);return i.a.createElement(x.a,{container:!0,direction:"column",className:"fullHeight",wrap:"nowrap"},i.a.createElement(Z,{topic:"Shifted Reconstruct",params:e,elementIndex:this.props.elementIndex}),i.a.createElement(ge,{params:this.props.magnitudes[0].params,sentenceParams:t}),i.a.createElement("div",{className:"overflow"},a.bodies.map((function(e,t){return i.a.createElement(he.a,{key:t},i.a.createElement(ue.a,{expandIcon:i.a.createElement(fe.a,null)},i.a.createElement(x.a,{container:!0,direction:"row",spacing:1,alignItems:"center"},i.a.createElement(x.a,{item:!0,style:{width:a.sentenceParams.headWidth}},i.a.createElement(N.a,{variant:"body1",color:"inherit"},a.magnitudeValues[t])),i.a.createElement(x.a,{item:!0},i.a.createElement(_,{sentence:a.sentences[t],target:a.sentenceParams.target,original:a.sentenceParams.original,colors:a.sentenceParams.colors})))),i.a.createElement(pe.a,null,e))}))))}}]),a}(i.a.PureComponent),xe=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){var e=re(this.props.results,this.props.params),t={LayerID:this.props.params.layer_id,WordID:this.props.params.word_id,NeuronID:this.props.params.neuron_id,Magnitude:this.props.params.shift_magnitude};return i.a.createElement(x.a,{container:!0,direction:"column",className:"fullHeight",wrap:"nowrap"},i.a.createElement(Z,{topic:"Shifted Reconstruct",params:t,elementIndex:this.props.elementIndex}),i.a.createElement(ge,{params:this.props.params,sentenceParams:e}),i.a.createElement("div",{className:"overflow"},i.a.createElement(S.a,{className:"dreamPaper"},i.a.createElement(ve,{params:this.props.params,results:this.props.results,sentenceParams:e}))))}}]),a}(i.a.PureComponent),Oe=a(193),ke=a(183),je=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleSliderChange=function(t,a){e.props.actions.changeTopWordsIteration(a)},e.handleInputChange=function(t){var a=""===t.target.value?"":Number(t.target.value);e.props.actions.changeTopWordsIteration(a)},e}return Object(g.a)(a,[{key:"render",value:function(){var e=this.props.iteration;return i.a.createElement(x.a,{item:!0},i.a.createElement(S.a,{className:"subHeadingPaper",style:{backgroundColor:"#DDDDDD"},square:!0},i.a.createElement(x.a,{container:!0,direction:"row",spacing:1,alignItems:"center"},i.a.createElement(C.a,{title:"Input Sentence",placement:"top"},i.a.createElement(x.a,{item:!0,style:{paddingRight:10}},i.a.createElement(N.a,{variant:"body1",color:"inherit"},"Iteration:"))),i.a.createElement(x.a,{item:!0,xs:!0},i.a.createElement(Oe.a,{value:e,onChange:this.handleSliderChange,max:this.props.maxIterations,"aria-labelledby":"input-slider"})),i.a.createElement(x.a,{item:!0,style:{paddingLeft:10}},i.a.createElement(ke.a,{value:e,margin:"dense",onChange:this.handleInputChange,inputProps:{step:1,min:0,max:this.props.maxIterations,type:"number","aria-labelledby":"input-slider"},className:"inputElement"})))))}}]),a}(i.a.Component);var Ne=Object(l.b)(null,(function(e){return{actions:Object(c.b)(n,e)}}))(je),Ie=a(25),De=50,Te=40,Se=60,Ce=100,_e=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"componentDidMount",value:function(){this.drawGraph()}},{key:"componentDidUpdate",value:function(e){JSON.stringify(this.props.cardDimensions)!==JSON.stringify(e.cardDimensions)?this.drawGraph():this.updateGraph()}},{key:"setupGraphParams",value:function(){var e=20+Te+Ce,t=170+De+Se,a=this.props.cardDimensions.width>e?this.props.cardDimensions.width-e:20,n=this.props.cardDimensions.height>t?this.props.cardDimensions.height-t:20,r=this.props.iteration,i=this.props.dreamingElement.iterations[r],o=Ie.d().domain([0,1]).range([0,a]),s=Ie.c().range([0,n]).padding(.1).domain(i.tokens.map((function(e){return e})));return{xScale:o,yScale:s,yAxis:Ie.a(s),svg:Ie.e(".topWordsComponent"+this.props.elementIndex),currentResults:i}}},{key:"drawGraph",value:function(){var e=this.setupGraphParams();e.svg.select("g").remove();var t=Ie.b(e.xScale),a=e.svg.append("g").attr("transform","translate("+Ce+","+De+")");a.selectAll("bar").data(e.currentResults.scores).enter().append("rect").style("fill",V("distribution")).attr("x",0).attr("width",(function(t){return e.xScale(t)})).attr("y",(function(t,a){return e.yScale(e.currentResults.tokens[a])})).attr("height",e.yScale.bandwidth()),a.append("g").attr("class","xAxis").call(t).selectAll("text").style("font","0.875rem roboto"),a.append("g").attr("class","yAxis").call(e.yAxis).selectAll("text").style("font","0.875rem roboto")}},{key:"updateGraph",value:function(){var e=this.setupGraphParams(),t=e.svg.select("g");t.selectAll(".bar").remove().exit().data(e.currentResults.scores).enter().append("rect").attr("class","bar").style("fill",V("softmax")).attr("x",0).attr("width",(function(t){return e.xScale(t)})).attr("y",(function(t,a){return e.yScale(e.currentResults.tokens[a])})).attr("height",e.yScale.bandwidth()),t.select(".yAxis").call(e.yAxis).selectAll("text").style("font","0.875rem roboto")}},{key:"render",value:function(){return i.a.createElement("svg",{width:"100%",height:"100%",className:"topWordsComponent"+this.props.elementIndex})}}]),a}(i.a.Component);var Ae=Object(l.b)((function(e,t){return{cardDimensions:e.cardDimensions}}))(_e),Pe=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){var e=this.props.topWordsIteration;e=e<this.props.dreamingElement.iterations.length?e:this.props.dreamingElement.iterations.length-1;var t={LayerID:this.props.dreamingElement.params.layer_id,WordID:this.props.dreamingElement.params.word_id,NeuronID:this.props.dreamingElement.params.neuron_id,Activation:this.props.dreamingElement.iterations[e].activation.toFixed(4)},a=Object(te.a)(this.props.dreamingElement.params.tokens);for(var n in this.props.dreamingElement.params.tokens)this.props.dreamingElement.word_id!==parseInt(n)&&(a[n]="");var r={headWidth:30,colors:["blue","black","black"],target:a},o={tokens:this.props.dreamingElement.params.tokens},s=this.props.dreamingElement.iterations[this.props.dreamingElement.iterations.length-1].number;return i.a.createElement(x.a,{container:!0,direction:"column",className:"fullHeight",wrap:"nowrap"},i.a.createElement(x.a,{item:!0,className:"explanationItem"},i.a.createElement("p",{className:"normalText"},i.a.createElement("b",null,"Experiment ",this.props.dreamID,": "),this.props.explanation)),i.a.createElement(Z,{topic:"Top Words",params:t,elementIndex:this.props.elementIndex,colors:this.props.colors}),i.a.createElement(L,{params:o,sentenceParams:r}),i.a.createElement(Ne,{maxIterations:s,dreamingElement:this.props.dreamingElement,elementIndex:this.props.elementIndex,iteration:e}),i.a.createElement(x.a,{item:!0,xs:!0},i.a.createElement(S.a,{id:"topWordsPaper",className:"dreamPaper fullHeight"},i.a.createElement(Ae,{dreamingElement:this.props.dreamingElement,elementIndex:this.props.elementIndex,iteration:e}))),i.a.createElement(ee,{options:3,clickHandler:this.handleClick.bind(this)}))}},{key:"handleClick",value:function(e){this.props.actions.changeAnnealing(e)}}]),a}(i.a.PureComponent);var We=Object(l.b)((function(e,t){return{dreamID:e.dreamID,topWordsIteration:e.topWordsIteration}}),(function(e){return{actions:Object(c.b)(n,e)}}))(Pe),Re=20,Je=20,He=60,Ve=100,ze=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"componentDidMount",value:function(){this.drawGraph()}},{key:"componentDidUpdate",value:function(){this.drawGraph()}},{key:"render",value:function(){return i.a.createElement("svg",{width:"100%",height:"100%",className:"similarEmbeddingsComponent"+this.props.elementIndex})}},{key:"drawGraph",value:function(){var e=20+Je+Ve,t=120+Re+He,a=this.props.cardDimensions.width>e?this.props.cardDimensions.width-e:20,n=this.props.cardDimensions.height>t?this.props.cardDimensions.height-t:20,r=Ie.e(".similarEmbeddingsComponent"+this.props.elementIndex);r.select("g").remove();var i=this.props.dreamingElement.tops;i.length>20&&(i=i.splice(0,20));var o,s=i[0].activation,c=0,l=Object(O.a)(i);try{for(l.s();!(o=l.n()).done;){var m=o.value;c=m.activation<c?m.activation:c}}catch(g){l.e(g)}finally{l.f()}var h=Ie.d().domain([c,s]).range([0,a]),u=Ie.d().domain([0,this.props.dreamingElement.furthest]).range([0,a]),p=Ie.c().range([0,n]).padding(.1).domain(i.map((function(e){return e.token}))),d=Ie.a(p),f=r.append("g").attr("transform","translate("+Ve+","+Re+")");f.selectAll("bar").data(i).enter().append("rect").style("fill",V("activation")).attr("x",0).attr("width",(function(e){return h(e.activation)})).attr("y",(function(e){return p(e.token)})).attr("height",p.bandwidth()/2),f.selectAll("txt").data(i).enter().append("text").style("font-size","10px").attr("y",(function(e){return p(e.token)+p.bandwidth()/2-2})).attr("x",(function(e){return 3})).text((function(e){return e.activation.toFixed(4)})),f.selectAll("bar").data(i).enter().append("rect").style("fill",V("distance")).attr("x",0).attr("width",(function(e){return u(e.distance)})).attr("y",(function(e){return p(e.token)+p.bandwidth()/2})).attr("height",p.bandwidth()/2),f.selectAll("txt").data(i).enter().append("text").style("font-size","10px").attr("y",(function(e){return p(e.token)+p.bandwidth()-2})).attr("x",(function(e){return 3})).text((function(e){return e.distance.toFixed(2)})),f.append("g").attr("class","yAxis").call(d).selectAll("text").style("font","0.875rem roboto")}}]),a}(i.a.Component);var Me=Object(l.b)((function(e,t){return{cardDimensions:e.cardDimensions}}))(ze),Be=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){var e={LayerID:this.props.dreamingElement.layer_id,WordID:this.props.dreamingElement.word_id,NeuronID:this.props.dreamingElement.neuron_id},t=Object(te.a)(this.props.dreamingElement.tokens);for(var a in this.props.dreamingElement.tokens)this.props.dreamingElement.change_word!==parseInt(a)&&(t[a]="");var n={headWidth:30,colors:["blue","black","black"],target:t},r={tokens:this.props.dreamingElement.tokens};return i.a.createElement(x.a,{container:!0,direction:"column",className:"fullHeight",wrap:"nowrap"},i.a.createElement(x.a,{item:!0,className:"explanationItem"},i.a.createElement("p",{className:"normalText"},i.a.createElement("b",null,"Experiment ",this.props.dreamID,": "),this.props.explanation)),i.a.createElement(Z,{topic:"Similar Embeddings",params:e,elementIndex:this.props.elementIndex,colors:this.props.colors}),i.a.createElement(L,{params:r,sentenceParams:n}),i.a.createElement(x.a,{item:!0,xs:!0},i.a.createElement(S.a,{id:"topWordsPaper",className:"dreamPaper fullHeight"},i.a.createElement(Me,{dreamingElement:this.props.dreamingElement,elementIndex:this.props.elementIndex}))),i.a.createElement(ee,{options:3,clickHandler:this.handleClick.bind(this)}))}},{key:"handleClick",value:function(e){this.props.actions.changeSimilarWords(e)}}]),a}(i.a.PureComponent);var Ge=Object(l.b)((function(e,t){return{dreamID:e.dreamID}}),(function(e){return{actions:Object(c.b)(n,e)}}))(Be),Le=20,Fe=20,Ue=60,qe=100,Ye=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"componentDidMount",value:function(){this.drawGraph()}},{key:"componentDidUpdate",value:function(){this.drawGraph()}},{key:"render",value:function(){return i.a.createElement("svg",{width:"100%",height:"100%",className:"tokenSearchComponent"+this.props.elementIndex})}},{key:"drawGraph",value:function(){var e=20+Fe+qe,t=120+Le+Ue,a=this.props.cardDimensions.width>e?this.props.cardDimensions.width-e:20,n=this.props.cardDimensions.height>t?this.props.cardDimensions.height-t:20,r=Ie.e(".tokenSearchComponent"+this.props.elementIndex);r.select("g").remove();var i=this.props.dreamingElement.tops;i.length>30&&(i=i.slice(0,30));var o,s=i[0].activation,c=0,l=Object(O.a)(i);try{for(l.s();!(o=l.n()).done;){var m=o.value;c=m.activation<c?m.activation:c}}catch(f){l.e(f)}finally{l.f()}var h=Ie.d().domain([c,s]).range([0,a]),u=Ie.c().range([0,n]).padding(.1).domain(i.map((function(e){return e.token}))),p=Ie.a(u),d=r.append("g").attr("transform","translate("+qe+","+Le+")");d.selectAll("bar").data(i).enter().append("rect").style("fill",V("activation")).attr("x",0).attr("width",(function(e){return h(e.activation)})).attr("y",(function(e){return u(e.token)})).attr("height",u.bandwidth()),d.selectAll("text").data(i).enter().append("text").style("font","10px roboto").attr("y",(function(e){return u(e.token)+u.bandwidth()/2+5})).attr("x",(function(e){return 3})).text((function(e){return e.activation.toFixed(4)})),d.append("g").attr("class","yAxis").style("font","10px roboto").call(p).selectAll("text")}}]),a}(i.a.Component);var Qe=Object(l.b)((function(e,t){return{cardDimensions:e.cardDimensions}}))(Ye),Xe=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){var e={LayerID:this.props.dreamingElement.layer_id,WordID:this.props.dreamingElement.word_id,NeuronID:this.props.dreamingElement.neuron_id},t=Object(te.a)(this.props.dreamingElement.tokens);for(var a in this.props.dreamingElement.tokens)this.props.dreamingElement.change_word!==parseInt(a)&&(t[a]="");var n={headWidth:30,colors:["blue","black","black"],target:t},r={tokens:this.props.dreamingElement.tokens};return i.a.createElement(x.a,{container:!0,direction:"column",className:"fullHeight",wrap:"nowrap"},i.a.createElement(x.a,{item:!0,className:"explanationItem"},i.a.createElement("p",{className:"normalText"},i.a.createElement("b",null,"Experiment ",this.props.dreamID,": "),this.props.explanation)),i.a.createElement(Z,{topic:"Token Search",params:e,elementIndex:this.props.elementIndex,colors:this.props.colors}),i.a.createElement(L,{params:r,sentenceParams:n}),i.a.createElement(x.a,{item:!0,xs:!0},i.a.createElement(S.a,{id:"topWordsPaper",className:"dreamPaper fullHeight"},i.a.createElement(Qe,{dreamingElement:this.props.dreamingElement,elementIndex:this.props.elementIndex}))),i.a.createElement(ee,{options:3,clickHandler:this.handleClick.bind(this)}))}},{key:"handleClick",value:function(e){this.props.actions.changeTopWords(e)}}]),a}(i.a.PureComponent);var Ze=Object(l.b)((function(e,t){return{dreamID:e.dreamID}}),(function(e){return{actions:Object(c.b)(n,e)}}))(Xe),$e="dream",Ke="reconstruct",et="reconstruct_shifted",tt="top_words",at="similar_embeddings",nt="token_search",rt="magnitudes",it="layers";function ot(e,t,a,n){var r;switch(e.type){case $e:r=i.a.createElement(se,{results:e.results,params:e.params,elementIndex:t,explanation:a,colors:n});break;case Ke:r=i.a.createElement(me,{results:e.results,params:e.params,elementIndex:t,colors:n});break;case et:r=i.a.createElement(xe,{results:e.results,params:e.params,elementIndex:t});break;case tt:r=i.a.createElement(We,{dreamingElement:e,elementIndex:t,explanation:a,colors:n});break;case at:r=i.a.createElement(Ge,{dreamingElement:e,elementIndex:t,explanation:a,colors:n});break;case nt:r=i.a.createElement(Ze,{dreamingElement:e,elementIndex:t,explanation:a,colors:n});break;case rt:r=i.a.createElement(ye,{magnitudes:e.magnitudes,elementIndex:t});break;case it:r=i.a.createElement(we,{layers:e.layers,elementIndex:t,explanation:a,colors:n});break;default:r=i.a.createElement("div",null)}return r}var st=function(){function e(){Object(f.a)(this,e)}return Object(g.a)(e,null,[{key:"getDreamJSON",value:function(e){var t=e+"_dream.json";return this.fetchData(t)}},{key:"getAnnealingJSON",value:function(e){var t=e+"_annealing.json";return this.fetchData(t)}},{key:"getTopWordsJSON",value:function(e){var t=e+"_top_words.json";return this.fetchData(t)}},{key:"getSimilarWordsJSON",value:function(e){var t=e+"_similar_words.json";return this.fetchData(t)}},{key:"getReconstructionJSON",value:function(e){var t=e+"_reconstruction.json";return this.fetchData(t)}},{key:"getShiftedReconstructionJSON",value:function(e){var t=e+"_shifted_reconstruction.json";return this.fetchData(t)}},{key:"fetchData",value:function(e){var t=new Request("".concat("/interpretability/text-dream/explainable","/data/").concat(e),{method:"GET"});return fetch(t).then((function(e){return e.json()})).catch((function(e){return e}))}}]),e}();function ct(e){return e.type===tt&&(e.iteration=0),{type:"ADD_DREAMING_ELEMENT",element:e}}function lt(e){return{type:"UPDATE_DREAMING_ELEMENTS",elements:e}}function mt(e){return{type:"REMOVE_DREAMING_ELEMENT",index:e}}function ht(e,t){return{type:"CHANGE_DREAMING_ELEMENT_ITERATION",iteration:e,index:t}}function ut(e){return{type:"CHANGE_CARD_DIMENSIONS",dimensions:e}}function pt(e){return{type:"CHANGE_SOFTMAX_STATUS",status:e}}function dt(e){return{type:"CHANGE_PROGRESS_PAGE",page:e}}function ft(e){return{type:"CHANGE_TOP_WORDS_ITERATION",iteration:e}}function gt(e){return{type:"CHANGE_DREAM_ID",id:e}}function bt(e){return{type:"LOAD_DREAM_SUCCESS",results:e}}function vt(e){return function(t){return st.getDreamJSON(e).then((function(e){t(bt(e))}))}}function Et(e){return function(t){return st.getDreamJSON(e).then((function(a){t(gt(e)),t(bt(a))}))}}function wt(e){return{type:"LOAD_ANNEALING_SUCCESS",results:e}}function yt(e){return function(t){return st.getAnnealingJSON(e).then((function(e){t(wt(e))}))}}function xt(e){return function(t){return st.getAnnealingJSON(e).then((function(a){t(gt(e)),t(wt(a))}))}}function Ot(e){return{type:"LOAD_TOP_WORDS_SUCCESS",results:e}}function kt(e){return function(t){return st.getTopWordsJSON(e).then((function(e){t(Ot(e))}))}}function jt(e){return function(t){return st.getTopWordsJSON(e).then((function(a){t(gt(e)),t(Ot(a))}))}}function Nt(e){return{type:"LOAD_SIMILAR_WORDS_SUCCESS",results:e}}function It(e){return function(t){return st.getSimilarWordsJSON(e).then((function(e){t(Nt(e))}))}}function Dt(e){return function(t){return st.getSimilarWordsJSON(e).then((function(a){t(gt(e)),t(Nt(a))}))}}function Tt(e){return{type:"LOAD_RECONSTRUCTION_SUCCESS",results:e}}function St(e){return function(t){return st.getReconstructionJSON(e).then((function(e){t(Tt(e))}))}}function Ct(e){return function(t){return st.getReconstructionJSON(e).then((function(a){t(gt(e)),t(Tt(a))}))}}function _t(e){return{type:"LOAD_SHIFTED_RECONSTRUCTION_SUCCESS",results:e}}function At(e){return function(t){return st.getShiftedReconstructionJSON(e).then((function(e){t(_t(e))}))}}function Pt(e){return function(t){return st.getShiftedReconstructionJSON(e).then((function(a){t(gt(e)),t(_t(a))}))}}var Wt=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).addElement=function(t){var a,n=Object(O.a)(t.target.files);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(r){var i=new window.FileReader;i.onload=function(e){return function(t){e(JSON.parse(t.target.result))}}(e.props.actions.addDreamingElement),i.readAsText(r)}}}catch(o){n.e(o)}finally{n.f()}},e.onInputClick=function(e){e.target.value=""},e}return Object(g.a)(a,[{key:"render",value:function(){return r.createElement(k.a,{position:"fixed",color:"primary"},r.createElement(j.a,{variant:"dense"},r.createElement(N.a,{variant:"h6",color:"inherit"},"What does BERT dream of?"),r.createElement(N.a,{variant:"caption",color:"inherit",className:"appTitle"},"\xa0\xa0\xa0- by Alex B\xe4uerle (",r.createElement("a",{href:"https://twitter.com/a13xba"},"@a13xba"),") and James Wexler (",r.createElement("a",{href:"https://twitter.com/bengiswex"},"@bengiswex"),") of ",r.createElement("a",{href:"https://pair.withgoogle.com/"},"PAIR"),"."),r.createElement(I.a,{"aria-label":"github",style:{color:"white"},href:"https://github.com/PAIR-code/interpretability/tree/master/text-dream"},r.createElement(T.a,null))))}}]),a}(r.Component);var Rt=Object(l.b)(null,(function(e){return{actions:Object(c.b)(n,e)}}))(Wt),Jt=a(186),Ht=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement(Jt.a,{variant:"determinate",className:"progress",value:this.props.progress.page/this.props.progress.of*100})}}]),a}(i.a.Component);var Vt=Object(l.b)((function(e,t){return{progress:e.progress}}))(Ht),zt=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement(x.a,{item:!0,className:"explanationItem"},i.a.createElement("h1",null,this.props.title))}}]),a}(i.a.Component),Mt=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement(x.a,{item:!0,className:"explanationItem overflow"},i.a.createElement("p",{className:"normalText"},i.a.createElement("a",{href:"https://distill.pub/2017/feature-visualization/"},"Feature Visualization")," ","is a common tool for interpretability of neural networks. The ideas of feature visualization are borrowed from"," ",i.a.createElement("a",{href:"https://ai.googleblog.com/2015/06/inceptionism-going-deeper-into-neural.html"},"Deep Dream"),", where we can obtain inputs that excite the network by maximizing the activation of neurons, channels, or layers of the network. This way, we get an idea about which part of the network is looking for what kind of input."),i.a.createElement(he.a,null,i.a.createElement(ue.a,{expandIcon:i.a.createElement(fe.a,null),classes:{expanded:"expandedPanel"}},"Deep Dream"),i.a.createElement(pe.a,null,i.a.createElement("p",{className:"smallText"},"In Deep Dream, inputs (pixels, when used on images) are changed through gradient descent to maximize activation values. This can be thought of as similar to the initial training process, where through many iterations, we try to optimize a mathematical equation. But instead of updating network parameters, Deep Dream updates the input sample. What this leads to is somewhat psychedelic but very interesting images, that can reveal to what kind of input these neurons react."))),i.a.createElement("p",{className:"normalText"},"This explainable provides visual insight into how we adapted the techniques of feature visualization to text-based models. Along this line, we"," ",i.a.createElement("a",{href:"https://github.com/PAIR-code/interpretability/tree/master/text-dream/webapp"},"visually illustrate")," ","this process, and explore reasons for why feature visualization does not work as well for text. We also publish"," ",i.a.createElement("a",{href:"https://github.com/PAIR-code/interpretability/tree/master/text-dream/python"},"tools")," ","to explore this direction further."),i.a.createElement("p",{className:"normalText"},"Our experiments have been conducted with"," ",i.a.createElement("a",{href:"https://arxiv.org/pdf/1810.04805.pdf"},"BERT"),", a neural network published by Google in 2018. BERT excels in natural language understanding. It can be used for multiple different tasks, such as sentiment analysis or next sentence prediction, and has"," ",i.a.createElement("a",{href:"https://www.blog.google/products/search/search-language-understanding-bert/"},"recently been integrated into Google Search"),". We visualize the output neurons of the transformer encoder layers within BERT. If you want to learn more about transformers, we recommend this"," ",i.a.createElement("a",{href:"http://jalammar.github.io/illustrated-transformer/"},"blog post"),"."))}}]),a}(i.a.Component),Bt=a(89),Gt=a.n(Bt),Lt=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement(x.a,{item:!0,className:"explanationItem overflow"},i.a.createElement("p",{className:"normalText"},"When dreaming for images, the input to the model is gradually changed. Language, however, is made of discrete structures, i.e. tokens, which represent words, or word-pieces. Thus, there is no such gradual change to be made",i.a.createElement(C.a,{title:i.a.createElement("span",{className:"styledTooltip"},"Looking at a single pixel in an input image, such a change could be gradually going from green to red. The green value would slowly go down, while the red value would increase. In language, however, we can not slowly go from the word 'green' to the word 'red', as everything in between does not make sense.")},i.a.createElement("sup",null,"[i]")),"."),i.a.createElement(he.a,null,i.a.createElement(ue.a,{expandIcon:i.a.createElement(fe.a,null),classes:{expanded:"expandedPanel"}},"Word Embeddings"),i.a.createElement(pe.a,null,i.a.createElement("p",{className:"smallText"},'Language models operate on embeddings of words. Using these embeddings, words are converted into high-dimensional vectors of continuous numbers. In this embedding space, words with similar meanings are closer together than words with different meanings. You might ask: "Why can\'t we use these embeddings to dream to?" The answer is that there is often no mapping from unconstrained embedding vectors back to real tokens. With Deep Dream changing the embeddings rather than input tokens, we can end up with embeddings that are nowhere close to any token.'))),i.a.createElement("p",{className:"normalText"},"To still be able to use Deep Dream, we have to utilize the so-called softmax-trick, which has already been employed in a ",i.a.createElement("a",{href:"https://www.aclweb.org/anthology/W18-5437"},"paper by Poerner et. al."),". This trick was introduced by ",i.a.createElement("a",{href:"https://arxiv.org/pdf/1611.01144.pdf"},"Jang et. al.")," and ",i.a.createElement("a",{href:"https://arxiv.org/pdf/1611.00712.pdf"},"Maddison et. al."),". It allows us to soften the requirement for discrete inputs, and instead use a linear combination of tokens as input to the model. To assure that we do not end up with something crazy, it uses two mechanisms. First, it constrains this linear combination so that the linear weights sum up to one. This, however, still leaves the problem that we can end up with any linear combination of such tokens, including ones that are not close to real tokens in the embedding space. Therefore, we also make use of a temperature parameter, which controls the sparsity of this linear combination. By slowly decreasing this temperature value, we can make the model first explore different linear combinations of tokens, before deciding on one token. You can experiment with this mechanism in this visualization."),i.a.createElement(he.a,null,i.a.createElement(ue.a,{expandIcon:i.a.createElement(fe.a,null),classes:{expanded:"expandedPanel"}},"Softmax Trick"),i.a.createElement(pe.a,null,i.a.createElement(Gt.a.Context,{input:"tex"},i.a.createElement("p",{className:"smallText"},"The trick does two things. To ensure that we sum up to one for the linear combination of tokens, it takes the softmax function over the smooth input token distribution. However, before applying the softmax function, we divide our token distribution vector by a temperature value, i.e. ",i.a.createElement(Gt.a.Node,{inline:!0},"softmax(token\\_distribution / t)"),". Dividing by large temperature values means that the softmax result will be smooth, whereas dividing by small temperature values results in a more spiky softmax function.")))))}}]),a}(i.a.Component),Ft=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement(x.a,{item:!0,className:"explanationItem overflow"},i.a.createElement("p",{className:"normalText"},"Now that we know how Deep Dream can be used in combination with text models, what do those results look like? Well, very unpredictable. For some neurons it was possible to produce sentences that highly activated them. However, for other neurons we weren't able to dream such sentences",i.a.createElement(C.a,{title:i.a.createElement("span",{className:"styledTooltip"},"As a baseline for all experiments, we used results from corpus search. Here, we searched through a large corpus of sentences and looked into which one activates the neuron of interest most. We always started the process with one of the top 10 sentences from this corpus, as this approach has a lot more freedom to change words and thus should be able to get to higher activations than corpus search alone.")},i.a.createElement("sup",null,"[i]")),". When changing single words, the model sometimes found one that led to a high activation, but not always. For whole sentences, the success rate was reduced even more. This meant that our idea of feature visualization for text was not working."),i.a.createElement(he.a,null,i.a.createElement(ue.a,{expandIcon:i.a.createElement(fe.a,null),classes:{expanded:"expandedPanel"}},"Changing Words with BERT"),i.a.createElement(pe.a,null,i.a.createElement("p",{className:"smallText"},"There are different options of which words to change using Deep Dream. We always kept the CLS and SEP tokens static. CLS is a special classification token used by BERT for some downstream tasks, while SEP marks the end of a sentence. When we allowed the model to change these tokens as well, it seemed to be even more confused and the approach completely failed. In between those special tokens, one can change anything from one word to the whole sentence, albeit with mixed results."))),i.a.createElement("p",{className:"normalText"},"The lack of success in dreaming words to highly activate specific neurons was surprising to us. This method uses gradient descent and seemed to work for other models (",i.a.createElement("a",{href:"https://www.aclweb.org/anthology/W18-5437"},"see Poerner et. al. 2018"),"). However, BERT is a complex model, arguably much more complex than the models that have been previously investigated with this method."),i.a.createElement("p",{className:"normalText"},"So, why is BERT such a bad dreamer? This is a question we tried to answer ",i.a.createElement("a",{href:"https://pair.withgoogle.com/"},"PAIR"),"-style, by providing explainability approaches to visually inspect those dreaming results",i.a.createElement(C.a,{title:i.a.createElement("span",{className:"styledTooltip"},"We used these tools to reason about our approaches with BERT, but if you run into similar problems, feel free to use them with any model. All tools presented within this are publicly available on GitHub.")},i.a.createElement("sup",null,"[i]")),"."))}}]),a}(i.a.Component),Ut=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement(x.a,{item:!0,className:"explanationItem overflow"},i.a.createElement("p",{className:"normalText"},"The first question we wanted to answer for these dreaming processes is how the input representation evolves. Here it is interesting to look at:"),i.a.createElement("ol",{className:"normalText"},i.a.createElement("li",null,i.a.createElement("p",null,"When and how the model replaces certain words.")),i.a.createElement("li",null,i.a.createElement("p",null,"How the activation value of the neuron we are trying to maximize evolves.")),i.a.createElement("li",null,i.a.createElement("p",null,"How the activation value would evolve if we always just picked the top-ranked token instead of the softmax combination we use during optimization.")),i.a.createElement("li",null,i.a.createElement("p",null,"How these interact with the change of temperature (explained"," ",i.a.createElement(E.b,{to:"/textspecial"},"two steps back"),") which forces the model to pick real tokens."))),i.a.createElement("p",{className:"normalText"},"As can be seen in this visualization, we were not able to consistently get back to the same or a higher activation than what we started with. This is despite this approach has a lot more freedom to change words than corpus search. We had some ideas on why this might not always work as expected:"),i.a.createElement("ol",{className:"normalText"},i.a.createElement("li",null,i.a.createElement("p",null,"Temperature annealing seems to first, allow the model to pick any linear combination of tokens, before gradually reducing the number of tokens used for this linear combination. What if some tokens get removed from the combination but would highly activate the neuron in isolation?")),i.a.createElement("li",null,i.a.createElement("p",null,"What if the model is so specialized that a neuron is highly activated by some specific token but not by that token's neighbors in embedding space?"))),i.a.createElement(he.a,null,i.a.createElement(ue.a,{expandIcon:i.a.createElement(fe.a,null),classes:{expanded:"expandedPanel"}},"Easier Conditions"),i.a.createElement(pe.a,null,i.a.createElement("p",{className:"smallText"},"To look at these processes and what might go wrong here, we made the problem easier by having it only change one word in the input sentence. While the probability of getting to a high activation value is higher than when changing the whole sentence, it still did not work out all the time."))))}}]),a}(i.a.Component),qt=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement(x.a,{item:!0,className:"explanationItem overflow"},i.a.createElement("p",{className:"normalText"},"To investigate our first idea for why BERT might have problems with dreaming, we wanted to see how the annealing progresses. Here, we were interested in how the softmax token-distribution changed throughout the process. We see how the model first uses a linear combination of many tokens to get to activation values that could not be achieved with any single token alone. Then, the model is forced by the temperature value to reduce this bag of tokens, whereas the number of tokens used for the linear combination is reduced step-by-step. In many cases, the model cannot switch back to a single, highly activating token after this reduction."))}}]),a}(i.a.Component),Yt=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement(x.a,{item:!0,className:"explanationItem overflow"},i.a.createElement("p",{className:"normalText"},"It is also interesting to look at this in combination with the top activations for a specific word position. We can do that by checking the activation for each word in the vocabulary. Interestingly, often none of the tokens that have high weights in the linear combination of tokens to input into the model can be found in these top activating ones. This shows one possible problem with this method and supports our theory that sometimes the annealing process removes highly activating tokens from the set of tokens that can be selected by the dreaming process."))}}]),a}(i.a.Component),Qt=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement(x.a,{item:!0,className:"explanationItem overflow"},i.a.createElement("p",{className:"normalText"},"Another possible reason this method doesn't always lead to the desired results is that the optimization problem is hard. A reason for this could be that the model's neurons are highly specialized on certain tokens, while all the tokens around it might not activate the neuron as much. To explore this possibility, we developed another visualization that allows us to look at activations for tokens that are close to the token we know highly activates the neuron. We see that just because a word is close in the embedding-space to a word we know produces a high activation, does not mean that it also highly activates the neuron. This could be an indication that some neurons are so specialized that it gets extremely hard to find optima using gradient descent, and might indeed be another reason for why these dreaming approaches sometimes fail to produce the expected results."),i.a.createElement(he.a,null,i.a.createElement(ue.a,{expandIcon:i.a.createElement(fe.a,null),classes:{expanded:"expandedPanel"}},"Distance Calculation"),i.a.createElement(pe.a,null,i.a.createElement("p",{className:"smallText"},"For this visualization, distance is calculated in embedding space. We get the high-dimensional representation of the token we are looking at as well as the most activating token, and then take the euclidian distance to figure out how close the tokens are to each other."))))}}]),a}(i.a.Component),Xt=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement(x.a,{item:!0,className:"explanationItem overflow"},i.a.createElement("p",{className:"normalText"},"To test the general applicability of this approach in a simpler setting, we tried to reconstruct activations instead of maximizing them. For this experiment, we fed a sentence into the network, saved the activation for a specific layer, and then tried to get back to this initial sentence using Deep Dream."),i.a.createElement(he.a,null,i.a.createElement(ue.a,{expandIcon:i.a.createElement(fe.a,null),classes:{expanded:"expandedPanel"}},"Experiment Details"),i.a.createElement(pe.a,null,i.a.createElement("p",{className:"smallText"},"Instead of looking for single neurons, we reconstructed the activation for the entire layer. As an initial input for the optimization problem, we used a random input sentence with the same length as the target sentence. We then used the same technique of changing the input to the network through gradient descent. This time, the optimization target was to minimize the difference between our saved activation and the input to the network. We used the same sentence for every layer, to see how this unfolds in different stages of the network."))),i.a.createElement("p",{className:"normalText"},"Surprisingly, these experiments seem to work comparably well. Even more interesting: this indicates not only that our approach has no major conceptual flaws, but reveals additional insight into the workings of BERT."),i.a.createElement("p",{className:"normalText"},"One such insight is that it seems to be easier to completely reconstruct the activation for earlier layers. Layers that take on later processing steps are consistently harder to reconstruct. Another interesting analysis is to look at which words get replaced in each of the layers. While some words cannot be reconstructed relatively early, which indicates that they might not be as important, others are replaced by conceptually similar words, which hints at how the model is able to reason about language. Other, seemingly important words are consistently reconstructed across all layers."),i.a.createElement("p",{className:"normalText"},"All in all, this experiment provided more insight than we initially expected, which led us to build on this and try something similar."))}}]),a}(i.a.Component),Zt=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement(x.a,{item:!0,className:"explanationItem overflow"},i.a.createElement("p",{className:"normalText"},'If reconstructing activations works, what happens if we change some activations before reconstruction? To investigate potential bias in such models, we wanted to make meaningful changes to the activations and look into what the model makes of these changes during reconstruction. Thus, we changed activations of gender-specific words in the directions of their counterparts, e.g. "he" in the direction of "she".'),i.a.createElement(he.a,null,i.a.createElement(ue.a,{expandIcon:i.a.createElement(fe.a,null),classes:{expanded:"expandedPanel"}},"Technical Details"),i.a.createElement(pe.a,null,i.a.createElement("p",{className:"smallText"},"Performing such changes can be done with some preprocessing. First, we gathered sentences for two concepts we want to test bias for. Then, we fed all these sentences through the network and saved the activation value for the concept-word in each layer. This gave us a representation of both concepts per layer. To then find a direction to reasonably change the activation towards, we used ",i.a.createElement("a",{href:"https://arxiv.org/pdf/1711.11279.pdf"},"Concept Activation Vectors (CAV)"),'. Thus, we trained linear classifiers between activations for both concepts. The vector that is orthogonal to the classification boundary could then be used as the direction to shift the activation by simply adding it to the original activation value. To follow this idea, we used a corpus of sentences containing male and female pronouns, namely "he" and "she". After obtaining the CAV for these concepts, we use the same approach of reconstructing activations as before. The only difference here is, that the activation that is to be reconstructed gets changed before the reconstruction process. To be more precise, we change the activation that we retrieved for a sentence at the position of a pronoun. The activations of all the other tokens are kept the same.'))),i.a.createElement("p",{className:"normalText"},'Interestingly, not only did a change occur during reconstruction of the token we shifted the activation for, but also for some of the tokens for which the activations were untouched. Most exciting was that sometimes the token "her" changed to "his", which matches the direction we shifted the pronoun token. Thus, even though we only changed the pronoun, this was so important for the model, that other tokens could be changed on this basis. On the other hand, we were not able to find even stronger indications of bias, where for example, the model would change the word "baseball" so something it understands as more "female". Also, as with all the other experiments we conducted, the results were neither completely reproducible nor predictable.'))}}]),a}(i.a.Component),$t=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement(x.a,{item:!0,className:"explanationItem overflow"},i.a.createElement("p",{className:"normalText"},"This explainable shows experiments aimed at looking into what a deep transformer language model, namely BERT, has learned. Although our attempts didn't work as well as we were hoping, we got some interesting insights into how a language model builds up its understanding of text using these methods. Thus, we are not giving up, and hope that one day we can understand what individual components of text models have learned through approaches like these. To support further research in this direction, we open-sourced all our ",i.a.createElement("a",{href:"https://github.com/PAIR-code/interpretability/tree/master/text-dream/python"},"code")," and ",i.a.createElement("a",{href:"https://github.com/PAIR-code/interpretability/tree/master/text-dream/webapp"},"visualizations"),"."),i.a.createElement("p",{className:"normalText"},i.a.createElement("span",null,"Many thanks to Martin Wattenberg, Nina Poerner, and Ian Tenney for helpful feedback and discussions about this research, and to David Weinberger for editorial input.")))}}]),a}(i.a.Component),Kt=a(74),ea=a.n(Kt),ta=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement(x.a,{item:!0,container:!0,direction:"row",justify:"center",spacing:2},i.a.createElement(x.a,{item:!0},i.a.createElement(E.b,{to:"/textspecial"},i.a.createElement($.a,{variant:"contained",color:"secondary",endIcon:i.a.createElement(ea.a,null)},"Start Exploring"))))}}]),a}(i.a.Component),aa=a(75),na=a.n(aa),ra=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement(x.a,{item:!0,container:!0,direction:"row",justify:"center",spacing:2},i.a.createElement(x.a,{item:!0},i.a.createElement(E.b,{to:this.props.prev},i.a.createElement($.a,{variant:"contained",color:"secondary",endIcon:i.a.createElement(na.a,null)},"Back"))),i.a.createElement(x.a,{item:!0},i.a.createElement(E.b,{to:this.props.next},i.a.createElement($.a,{variant:"contained",color:"secondary",endIcon:i.a.createElement(ea.a,null)},"Next"))))}}]),a}(i.a.Component),ia=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement(x.a,{item:!0,container:!0,direction:"row",justify:"center",spacing:2},i.a.createElement(x.a,{item:!0},i.a.createElement(E.b,{to:"/shiftvis"},i.a.createElement($.a,{variant:"contained",color:"secondary",endIcon:i.a.createElement(na.a,null)},"Back"))))}}]),a}(i.a.Component),oa=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement(x.a,{item:!0,xs:!0,className:"explanationItem"},i.a.createElement("img",{src:"https://2.bp.blogspot.com/-17ajatawCW4/VYITTA1NkDI/AAAAAAAAAlM/eZmy5_Uu9TQ/s1600/classvis.png",className:"slim",alt:"Deep Dream"}),i.a.createElement("div",{className:"caption-slim"},i.a.createElement("p",null,"Examples for Deep Dream processes with images from the original Deep Dream ",i.a.createElement("a",{href:"https://ai.googleblog.com/2015/06/inceptionism-going-deeper-into-neural.html"},"blogpost"),". Here, they take a randomly initialized image and use Deep Dream to transform the image by maximizing the activation of the corresponding output neuron. This can show what a network has learned about different classes or for individual neurons.")))}}]),a}(i.a.Component),sa=a(189),ca=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(t,a){var n=JSON.parse(JSON.stringify(e.props.softmaxStatus));n.temperature=a,e.props.actions.changeSoftmaxStatus(n)},e}return Object(g.a)(a,[{key:"softmaxTemp",value:function(e,t){var a=Math.max.apply(Math,Object(te.a)(e)),n=e.map((function(e){return Math.exp(e/t-a)})).reduce((function(e,t){return e+t}));return e.map((function(e,r){var i=Math.exp(e/t-a)/n;return Math.round(100*(i+Number.EPSILON))/100}))}},{key:"render",value:function(){var e=this,t=this.softmaxTemp(this.props.softmaxStatus.values,1),a=this.softmaxTemp(this.props.softmaxStatus.values,this.props.softmaxStatus.temperature);return i.a.createElement(x.a,{container:!0,direction:"column",spacing:2},i.a.createElement(x.a,{item:!0,container:!0,justify:"center",spacing:2},i.a.createElement(x.a,{item:!0,xs:2},"Temperature:"),i.a.createElement(x.a,{item:!0,xs:!0},i.a.createElement(Oe.a,{step:.1,min:.01,max:2,value:this.props.softmaxStatus.temperature,valueLabelDisplay:"on",onChange:this.handleChange}))),i.a.createElement(x.a,{item:!0,container:!0,justify:"center",spacing:2},i.a.createElement(x.a,{item:!0,xs:2},"Word Score:"),this.props.softmaxStatus.values.map((function(t,a){return i.a.createElement(x.a,{item:!0,xs:2,key:a},i.a.createElement(sa.a,{label:e.props.softmaxStatus.labels[a],value:t,onChange:function(t){var n=JSON.parse(JSON.stringify(e.props.softmaxStatus)),r=isNaN(parseFloat(t.target.value))?0:parseFloat(t.target.value);n.values[a]=r,e.props.actions.changeSoftmaxStatus(n)}}))}))),i.a.createElement(x.a,{item:!0,container:!0,justify:"center",spacing:2},i.a.createElement(x.a,{item:!0,xs:2},"Softmax Score:"),t.map((function(e,t){return i.a.createElement(x.a,{item:!0,xs:2,key:t},e)}))),i.a.createElement(x.a,{item:!0,container:!0,justify:"center",spacing:2},i.a.createElement(x.a,{item:!0,xs:2},"With Temp.:"),a.map((function(e,t){return i.a.createElement(x.a,{item:!0,xs:2,key:t},e)}))))}}]),a}(i.a.PureComponent);var la=Object(l.b)((function(e,t){return{softmaxStatus:e.softmaxStatus}}),(function(e){return{actions:Object(c.b)(n,e)}}))(ca),ma=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement(x.a,{item:!0,xs:!0,className:"explanationItem"},i.a.createElement(la,null))}}]),a}(i.a.Component);var ha=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"componentDidMount",value:function(){this.props.actions.loadDream(this.props.dreamID)}},{key:"render",value:function(){var e=ot(this.props.dreamVisJSON,0,["In this experiment. The process first finds a linear combination of tokens which leads to a high activation value. However, after reducing the temperature, it is not able to get back to the original activation anymore.","As with the first experiment, here we are not able to find a word that leads to the same or a higher activation than what we started with.","This is an example of a more successful run. Here, we are able to go back to the same high activation value as we started with. In a later visualization, we will see that this is the highest possible activation for this neuron."][this.props.dreamID-1],["temperature","activation","ids_activation"]);return i.a.createElement(x.a,{item:!0,xs:!0,className:"fullHeight"},e)}}]),a}(i.a.Component);var ua=Object(l.b)((function(e,t){return{dreamID:e.dreamID,dreamVisJSON:e.dreamVisJSON}}),(function(e){return{actions:Object(c.b)(n,e)}}))(ha),pa=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"componentDidMount",value:function(){this.props.actions.loadAnnealing(this.props.dreamID);var e=document.getElementById("cardItem");null!=e&&this.props.actions.changeCardDimensions({width:e.getBoundingClientRect().width,height:e.getBoundingClientRect().height})}},{key:"render",value:function(){var e=ot(this.props.annealingVisJSON,0,["None of the words that individually highly activate the neuron are in the top-ranked for most of the iterations. We suspect this is the reason why the model cannot get to a high activation when the temperature is lowered.","None of the words that individually highly activate the neuron are in the top-ranked for most of the iterations. We suspect this is the reason why the model cannot get to a high activation when the temperature is lowered.",'We see how the word "anger" is continually in the top-ranked words. This might be why the model can later select this word to get a high activation.'][this.props.dreamID-1],["softmax"]);return i.a.createElement(x.a,{item:!0,xs:!0,className:"fullHeight",id:"cardItem"},e)}}]),a}(i.a.Component);var da=Object(l.b)((function(e,t){return{dreamID:e.dreamID,annealingVisJSON:e.annealingVisJSON}}),(function(e){return{actions:Object(c.b)(n,e)}}))(pa),fa=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"componentDidMount",value:function(){this.props.actions.loadTopWords(this.props.dreamID);var e=document.getElementById("cardItem");null!=e&&this.props.actions.changeCardDimensions({width:e.getBoundingClientRect().width,height:e.getBoundingClientRect().height})}},{key:"render",value:function(){var e=ot(this.props.topWordsVisJSON,0,["Even though for is not the word with the highest activation value, feature visualization can't reproduce this activation.",'The word we start with, "match", is only the third-highest activating word. Still, we are not able to get to the same, or a higher activation through feature visualization.','We see that the word we started with, "anger", is the highest activating word for this neuron.'][this.props.dreamID-1],["activation"]);return i.a.createElement(x.a,{item:!0,xs:!0,className:"fullHeight",id:"cardItem"},e)}}]),a}(i.a.Component);var ga=Object(l.b)((function(e,t){return{dreamID:e.dreamID,topWordsVisJSON:e.topWordsVisJSON}}),(function(e){return{actions:Object(c.b)(n,e)}}))(fa),ba=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"componentDidMount",value:function(){this.props.actions.loadSimilarWords(this.props.dreamID);var e=document.getElementById("cardItem");null!=e&&this.props.actions.changeCardDimensions({width:e.getBoundingClientRect().width,height:e.getBoundingClientRect().height})}},{key:"render",value:function(){var e=ot(this.props.similarVisJSON,0,['Words that are similar to our start word "for" have a significantly lower activation value. This might make optimization hard.',"There are words that are close to our start word that lead to similar high activation values, however, the process still fails during optimization.","Even though in this case, the optimization process is successful, no words that are close to our start word in embedding space lead to high activation values."][this.props.dreamID-1],["activation","distance"]);return i.a.createElement(x.a,{item:!0,xs:!0,className:"fullHeight",id:"cardItem"},e)}}]),a}(i.a.Component);var va=Object(l.b)((function(e,t){return{dreamID:e.dreamID,similarVisJSON:e.similarVisJSON}}),(function(e){return{actions:Object(c.b)(n,e)}}))(ba),Ea=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"componentDidMount",value:function(){this.props.actions.loadReconstruction(this.props.dreamID);var e=document.getElementById("cardItem");null!=e&&this.props.actions.changeCardDimensions({width:e.getBoundingClientRect().width,height:e.getBoundingClientRect().height})}},{key:"render",value:function(){var e=ot(this.props.reconstructVisJSON,0,['We can see that connections such as the word "for", commas, and the word "and" get replaced with seemingly random words early. This might be because these words are not critical to understand the meaning of the sentence. Other words, such as "duties", "include", and "sites" are replaced by conceptually similar words, such as "interests", "reflect", and "venues" in some of the layers that preserve the overall meaning of the sentence. Interestingly, some important words are consistently reconstructed across all layers.','Again, the first thing getting replaced is the "." at the end of the sentence, which is not important for a general understanding of the sentence. Additionally "no" gets replaced with "nothing", "neither", and "nobody" at different stages of the optimization, which are all similar to "no".','The model first replaces irrelevant words such as "the" and "of", but  also "he", indicating that gender is not important here. Then, we again see replacements with similar words, before only the most important words, such as "anger" and "defeat" can be reconstructed.'][this.props.dreamID-1],["temperature","loss","ids_loss"]);return i.a.createElement(x.a,{item:!0,xs:!0,className:"fullHeight",id:"cardItem"},e)}}]),a}(i.a.Component);var wa=Object(l.b)((function(e,t){return{dreamID:e.dreamID,reconstructVisJSON:e.reconstructVisJSON}}),(function(e){return{actions:Object(c.b)(n,e)}}))(Ea),ya=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"componentDidMount",value:function(){this.props.actions.loadShiftedReconstruction(this.props.dreamID);var e=document.getElementById("cardItem");null!=e&&this.props.actions.changeCardDimensions({width:e.getBoundingClientRect().width,height:e.getBoundingClientRect().height})}},{key:"render",value:function(){var e=ot(this.props.shiftVisJSON,0,['Through the activation shift, the model indeed reconstructs "he" for some layers. Looking at layer 4 in detail, we see that the model even sometimes swaps our "her" for "his".','While we can, again, bring the model to replace the pronoun, it does notseem like there is enough bias to then also flip the unchanged word "doctor".',"This sentence has gender dependencies in more than one place, which even prevents the targeted pronoun flip which worked in both of the other experiments."][this.props.dreamID-1],["loss","ids_loss"]);return i.a.createElement(x.a,{item:!0,xs:!0,className:"fullHeight",id:"cardItem"},e)}}]),a}(i.a.Component);var xa=Object(l.b)((function(e,t){return{dreamID:e.dreamID,shiftVisJSON:e.shiftVisJSON}}),(function(e){return{actions:Object(c.b)(n,e)}}))(ya);var Oa=[{heading:i.a.createElement(zt,{title:"Feature Visualization for Text?"}),texts:i.a.createElement(Mt,null),buttons:i.a.createElement(ta,null),illustration:i.a.createElement(oa,null)},{heading:i.a.createElement(zt,{title:"Textual Models"}),texts:i.a.createElement(Lt,null),buttons:i.a.createElement(ra,{prev:"/featurevis",next:"/bertresults"}),illustration:i.a.createElement(ma,null)},{heading:i.a.createElement(zt,{title:"Results with BERT"}),texts:i.a.createElement(Ft,null),buttons:i.a.createElement(ra,{prev:"/textspecial",next:"/dreamvis"}),illustration:null},{heading:i.a.createElement(zt,{title:"Visualized Dreams"}),texts:i.a.createElement(Ut,null),buttons:i.a.createElement(ra,{prev:"/bertresults",next:"/annealingvis"}),illustration:i.a.createElement(ua,null)},{heading:i.a.createElement(zt,{title:"Annealing Processes Visualized"}),texts:i.a.createElement(qt,null),buttons:i.a.createElement(ra,{prev:"/dreamvis",next:"/topvis"}),illustration:i.a.createElement(da,null)},{heading:i.a.createElement(zt,{title:"Top Words Visualized"}),texts:i.a.createElement(Yt,null),buttons:i.a.createElement(ra,{prev:"/annealingvis",next:"/similarvis"}),illustration:i.a.createElement(ga,null)},{heading:i.a.createElement(zt,{title:"Activations for Similar Words"}),texts:i.a.createElement(Qt,null),buttons:i.a.createElement(ra,{prev:"/topvis",next:"/reconstructvis"}),illustration:i.a.createElement(va,null)},{heading:i.a.createElement(zt,{title:"Reconstructing known Activations"}),texts:i.a.createElement(Xt,null),buttons:i.a.createElement(ra,{prev:"/similarvis",next:"/shiftvis"}),illustration:i.a.createElement(wa,null)},{heading:i.a.createElement(zt,{title:"Reconstructing changed Activations"}),texts:i.a.createElement(Zt,null),buttons:i.a.createElement(ra,{prev:"/reconstructvis",next:"/conclusion"}),illustration:i.a.createElement(xa,null)},{heading:i.a.createElement(zt,{title:"Conclusion"}),texts:i.a.createElement($t,null),buttons:i.a.createElement(ia,null),illustration:null}],ka=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"componentDidMount",value:function(){this.props.actions.changeProgressPage(this.props.index+1)}},{key:"render",value:function(){var e,t=(e=this.props.index,Oa[e]);return i.a.createElement(x.a,{container:!0,alignItems:"center",spacing:2,className:"fullHeight",justify:"center"},i.a.createElement(x.a,{item:!0,xs:6,container:!0,direction:"column",spacing:2,className:"fullHeight",justify:"center",wrap:"nowrap"},t.heading,t.texts,t.buttons),t.illustration)}}]),a}(i.a.Component);var ja=Object(l.b)(null,(function(e){return{actions:Object(c.b)(n,e)}}))(ka),Na=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return r.createElement("div",{className:"content"},r.createElement(E.a,{basename:"/interpretability/text-dream/explainable"},r.createElement("header",null,r.createElement(Rt,null)),r.createElement(x.a,{container:!0,direction:"column",className:"fullHeight"},r.createElement(Vt,null),r.createElement(x.a,{item:!0,xs:!0,className:"fullHeight"},r.createElement("div",{className:"full"},r.createElement(w.a,{exact:!0,path:"/"},(function(e){var t=e.match;return r.createElement(y.a,{in:null!=t,timeout:300,classNames:"page",unmountOnExit:!0},r.createElement(ja,{index:0}))})),r.createElement(w.a,{exact:!0,path:"/featurevis"},(function(e){var t=e.match;return r.createElement(y.a,{in:null!=t,timeout:300,classNames:"page",unmountOnExit:!0},r.createElement(ja,{index:0}))})),r.createElement(w.a,{exact:!0,path:"/textspecial"},(function(e){var t=e.match;return r.createElement(y.a,{in:null!=t,timeout:300,classNames:"page",unmountOnExit:!0},r.createElement(ja,{index:1}))})),r.createElement(w.a,{exact:!0,path:"/bertresults"},(function(e){var t=e.match;return r.createElement(y.a,{in:null!=t,timeout:300,classNames:"page",unmountOnExit:!0},r.createElement(ja,{index:2}))})),r.createElement(w.a,{exact:!0,path:"/dreamvis"},(function(e){var t=e.match;return r.createElement(y.a,{in:null!=t,timeout:300,classNames:"page",unmountOnExit:!0},r.createElement(ja,{index:3}))})),r.createElement(w.a,{exact:!0,path:"/annealingvis"},(function(e){var t=e.match;return r.createElement(y.a,{in:null!=t,timeout:300,classNames:"page",unmountOnExit:!0},r.createElement(ja,{index:4}))})),r.createElement(w.a,{exact:!0,path:"/topvis"},(function(e){var t=e.match;return r.createElement(y.a,{in:null!=t,timeout:300,classNames:"page",unmountOnExit:!0},r.createElement(ja,{index:5}))})),r.createElement(w.a,{exact:!0,path:"/similarvis"},(function(e){var t=e.match;return r.createElement(y.a,{in:null!=t,timeout:300,classNames:"page",unmountOnExit:!0},r.createElement(ja,{index:6}))})),r.createElement(w.a,{exact:!0,path:"/reconstructvis"},(function(e){var t=e.match;return r.createElement(y.a,{in:null!=t,timeout:300,classNames:"page",unmountOnExit:!0},r.createElement(ja,{index:7}))})),r.createElement(w.a,{exact:!0,path:"/shiftvis"},(function(e){var t=e.match;return r.createElement(y.a,{in:null!=t,timeout:300,classNames:"page",unmountOnExit:!0},r.createElement(ja,{index:8}))})),r.createElement(w.a,{exact:!0,path:"/conclusion"},(function(e){var t=e.match;return r.createElement(y.a,{in:null!=t,timeout:300,classNames:"page",unmountOnExit:!0},r.createElement(ja,{index:9}))})))))))}}]),a}(r.Component),Ia={cardDimensions:{width:10,height:10},softmaxStatus:{values:[2.2,.8,1.4,1,.1],labels:["Dog","Cat","Monkey","Car","Truck"],temperature:1},progress:{page:1,of:10},topWordsIteration:0,dreamVisJSON:{},dreamID:1,annealingVisJSON:{},topWordsVisJSON:{},similarVisJSON:{},reconstructVisJSON:{},shiftVisJSON:{}};var Da=a(93);var Ta=Object(c.c)({cardDimensions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ia.cardDimensions,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_CARD_DIMENSIONS":var a={width:t.dimensions.width,height:t.dimensions.height-50};return a;default:return e}},softmaxStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ia.softmaxStatus,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_SOFTMAX_STATUS":return t.status;default:return e}},progress:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ia.progress,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_PROGRESS_PAGE":return Object(Da.a)(Object(Da.a)({},e),{},{page:t.page});default:return e}},topWordsIteration:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ia.topWordsIteration,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_TOP_WORDS_ITERATION":return t.iteration;default:return e}},dreamID:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ia.dreamID,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_DREAM_ID":return t.id;default:return e}},dreamVisJSON:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ia.dreamVisJSON,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_DREAM_SUCCESS":return t.results;default:return e}},annealingVisJSON:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ia.annealingVisJSON,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_ANNEALING_SUCCESS":return t.results;default:return e}},topWordsVisJSON:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ia.topWordsVisJSON,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_TOP_WORDS_SUCCESS":return t.results;default:return e}},similarVisJSON:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ia.similarVisJSON,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_SIMILAR_WORDS_SUCCESS":return t.results;default:return e}},reconstructVisJSON:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ia.reconstructVisJSON,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_RECONSTRUCTION_SUCCESS":return t.results;default:return e}},shiftVisJSON:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ia.shiftVisJSON,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_SHIFTED_RECONSTRUCTION_SUCCESS":return t.results;default:return e}}}),Sa=Object(c.d)(Ta,Object(c.a)(m.a)),Ca=Object(u.a)({palette:{primary:{light:d.a[300],main:d.a[900],dark:d.a[700]},secondary:{light:"rgba(255, 179, 68, 0.1)",main:"rgba(255, 179, 68, 0.2)",dark:"rgba(255, 179, 68, 0.6)"}},typography:{useNextVariants:!0}}),_a=function(){return i.a.createElement(p.a,{theme:Ca},i.a.createElement(l.a,{store:Sa},i.a.createElement(h.a,null),i.a.createElement(Na,null)))},Aa=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Pa(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a(142);s.a.render(i.a.createElement(_a,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/interpretability/text-dream/explainable",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/interpretability/text-dream/explainable","/service-worker.js");Aa?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Pa(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):Pa(e)}))}}()}},[[127,1,2]]]);
//# sourceMappingURL=main.3da8b0d3.chunk.js.map